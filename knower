#!/usr/bin/env bash
set -e
KNOWER_DIR="$(cd "$(dirname "$0")" && pwd)"

case "$1" in
  start)     docker compose --profile all up -d ;;
  stop)      docker compose --profile all down ;;
  clean)     docker compose --profile all down -v ;;
  visualize) docker compose --profile web up -d ;;
  status)    docker compose ps ;;
  vault)     open "$KNOWER_DIR/vault" ;;  # macOS only
  shell)     docker compose exec -it core bash ;;
  help)      echo "Usage: knower {start|stop|clean|visualize|status|vault|shell}" ;;
  *)
    echo "Usage: knower {start|stop|clean|visualize|status|vault|shell}"
    exit 1
    ;;
esac